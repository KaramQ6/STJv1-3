# إعداد قاعدة البيانات - خطوات التنفيذ

## ✅ تم الانتهاء من:
- إعادة تفعيل كود Supabase في AppContext.js
- إعداد دوال saveUserPreferences و checkUserAndProfile
- إنشاء ملفات SQL المطلوبة

## 🎯 الخطوات المطلوبة الآن:

### 1. **إنشاء جدول profiles (للتفضيلات)**
1. اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard)
2. اختر مشروعك: `shhmlmejukbvtotgjule`
3. من القائمة الجانبية، اختر **SQL Editor**
4. انسخ محتوى ملف `src/sql/create_profiles_table.sql` وألصقه
5. اضغط **Run** أو **F5**

### 2. **إنشاء جدول itineraries (للوجهات المحفوظة)**
1. في نفس SQL Editor
2. انسخ محتوى ملف `src/sql/create_itineraries_table.sql` وألصقه
3. اضغط **Run** أو **F5**

### 3. **التحقق من نجاح إنشاء الجداول**
1. اذهب إلى **Table Editor**
2. تأكد من وجود:
   - جدول `profiles` مع أعمدة: id, preferences, created_at, updated_at
   - جدول `itineraries` مع أعمدة: id, user_id, destination_id, created_at, updated_at

## 🔧 **ميزات النظام بعد إعداد قاعدة البيانات:**

### تفضيلات المستخدم:
- ✅ حفظ في Supabase (مزامنة عبر الأجهزة)
- ✅ نسخ احتياطي في localStorage
- ✅ حماية RLS - كل مستخدم يرى تفضيلاته فقط

### خطة المستخدم:
- ✅ إضافة وجهات من الشات بوت
- ✅ صفحة "خطتي" محمية للمستخدمين المسجلين
- ✅ حذف الوجهات من الخطة

## 🚀 **بعد إعداد قاعدة البيانات:**
1. قم بتسجيل دخول في التطبيق
2. اذهب إلى صفحة الملف الشخصي وحدّث التفضيلات
3. استخدم الشات بوت واطلب اقتراح وجهة
4. اضغط على "أضف إلى خطتي"
5. زر صفحة "خطتي" لرؤية الوجهات المحفوظة

## ⚠️ **ملاحظة مهمة:**
إذا لم تقم بإعداد قاعدة البيانات بعد، فالتطبيق سيعمل مع localStorage فقط (بدون مزامنة عبر الأجهزة).
